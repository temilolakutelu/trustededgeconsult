!function(t,e){var n={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '—'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>‹</span>",next:"<span class='fc-text-arrow'>›</span>",prevYear:"<span class='fc-text-arrow'>«</span>",nextYear:"<span class='fc-text-arrow'>»</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},r={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>›</span>",next:"<span class='fc-text-arrow'>‹</span>",prevYear:"<span class='fc-text-arrow'>»</span>",nextYear:"<span class='fc-text-arrow'>«</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},a=t.fullCalendar={version:"1.6.4"},o=a.views={};function i(e){t.extend(!0,n,e)}t.fn.fullCalendar=function(i){if("string"==typeof i){var c,u=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=t.data(this,"fullCalendar");if(n&&t.isFunction(n[i])){var r=n[i].apply(n,u);c===e&&(c=r),"destroy"==i&&t.removeData(this,"fullCalendar")}}),c!==e?c:this}var f=(i=i||{}).eventSources||[];return delete i.eventSources,i.events&&(f.push(i.events),delete i.events),i=t.extend(!0,{},n,i.isRTL||i.isRTL===e&&n.isRTL?r:{},i),this.each(function(n,r){var c=t(r),u=new function(n,r,i){var c=this;c.options=r,c.render=function(e){d?z()&&(j(),P(e)):function(){r.theme?"ui":"fc",n.addClass("fc"),r.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr");r.theme&&n.addClass("ui-widget");d=t("<div class='fc-content' style='position:relative'/>").prependTo(n),u=new function(e,n){var r=this;r.render=function(){if(a=n.theme?"ui":"fc",n.header)return i=t("<table class='fc-header' style='width:100%'/>").append(t("<tr/>").append(s("left")).append(s("center")).append(s("right")))},r.destroy=function(){i.remove()},r.updateTitle=function(t){i.find("h2").html(t)},r.activateButton=function(t){i.find("span.fc-button-"+t).addClass(a+"-state-active")},r.deactivateButton=function(t){i.find("span.fc-button-"+t).removeClass(a+"-state-active")},r.disableButton=function(t){i.find("span.fc-button-"+t).addClass(a+"-state-disabled")},r.enableButton=function(t){i.find("span.fc-button-"+t).removeClass(a+"-state-disabled")};var a,i=t([]);function s(r){var i=t("<td class='fc-header-"+r+"'/>"),s=n.header[r];return s&&t.each(s.split(" "),function(r){var s;r>0&&i.append("<span class='fc-header-space'/>"),t.each(this.split(","),function(r,l){var c;if("title"==l)i.append("<span class='fc-header-title'><h2> </h2></span>"),s&&s.addClass(a+"-corner-right"),s=null;else if(e[l]?c=e[l]:o[l]&&(c=function(){d.removeClass(a+"-state-hover"),e.changeView(l)}),c){var u=n.theme?_(n.buttonIcons,l):null,f=_(n.buttonText,l),d=t("<span class='fc-button fc-button-"+l+" "+a+"-state-default'>"+(u?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+u+"'/></span>":f)+"</span>").click(function(){d.hasClass(a+"-state-disabled")||c()}).mousedown(function(){d.not("."+a+"-state-active").not("."+a+"-state-disabled").addClass(a+"-state-down")}).mouseup(function(){d.removeClass(a+"-state-down")}).hover(function(){d.not("."+a+"-state-active").not("."+a+"-state-disabled").addClass(a+"-state-hover")},function(){d.removeClass(a+"-state-hover").removeClass(a+"-state-down")}).appendTo(i);Y(d),s||d.addClass(a+"-corner-left"),s=d}}),s&&s.addClass(a+"-corner-right")}),i}}(c,r),(f=u.render())&&n.prepend(f);O(r.defaultView),r.handleWindowResize&&t(window).resize(J);A()||N()}()},c.destroy=function(){p&&(tt("viewDestroy",p,p,p.element),p.triggerEventDestroy());t(window).unbind("resize",J),u.destroy(),d.remove(),n.removeClass("fc fc-rtl ui-widget")},c.refetchEvents=function(){Z(),G()},c.reportEvents=function(t){R=t,U()},c.reportEventChange=function(t){V(t)},c.rerenderEvents=V,c.changeView=O,c.select=function(t,n,r){p.select(t,n,r===e||r)},c.unselect=$,c.prev=function(){L(-1)},c.next=function(){L(1)},c.prevYear=function(){v(F,-1),L()},c.nextYear=function(){v(F,1),L()},c.today=function(){F=new Date,L()},c.gotoDate=function(t,e,n){t instanceof Date?F=w(t):C(F,t,e,n);L()},c.incrementDate=function(t,n,r){t!==e&&v(F,t);n!==e&&h(F,n);r!==e&&g(F,r);L()},c.formatDate=function(t,e){return T(t,e,r)},c.formatDates=function(t,e,n){return x(t,e,n,r)},c.getDate=function(){return w(F)},c.getView=function(){return p},c.option=function(t,n){if(n===e)return r[t];"height"!=t&&"contentHeight"!=t&&"aspectRatio"!=t||(r[t]=n,B())},c.trigger=tt,function(n,r){var o=this;o.isFetchNeeded=function(t,e){return!i||t<i||e>c},o.fetchEvents=function(t,e){i=t,c=e,y=[];var n=++g,r=h.length;p=r;for(var a=0;a<r;a++)b(h[a],n)},o.addEventSource=function(t){(t=C(t))&&(p++,b(t,g))},o.removeEventSource=function(e){h=t.grep(h,function(t){return!x(t,e)}),y=t.grep(y,function(t){return!x(t.source,e)}),d(y)},o.updateEvent=function(t){var e,n,r=y.length,a=f().defaultEventEnd,o=t.start-t._start,i=t.end?t.end-(t._end||a(t)):0;for(e=0;e<r;e++)(n=y[e])._id==t._id&&n!=t&&(n.start=new Date(+n.start+o),t.end?n.end?n.end=new Date(+n.end+i):n.end=new Date(+a(n)+i):n.end=null,n.title=t.title,n.url=t.url,n.allDay=t.allDay,n.className=t.className,n.editable=t.editable,n.color=t.color,n.backgroundColor=t.backgroundColor,n.borderColor=t.borderColor,n.textColor=t.textColor,T(n));T(t),d(y)},o.renderEvent=function(t,e){T(t),t.source||(e&&(v.events.push(t),t.source=v),y.push(t));d(y)},o.removeEvents=function(e){if(e){if(!t.isFunction(e)){var n=e+"";e=function(t){return t._id==n}}y=t.grep(y,e,!0);for(var r=0;r<h.length;r++)t.isArray(h[r].events)&&(h[r].events=t.grep(h[r].events,e,!0))}else{y=[];for(var r=0;r<h.length;r++)t.isArray(h[r].events)&&(h[r].events=[])}d(y)},o.clientEvents=function(e){{if(t.isFunction(e))return t.grep(y,e);if(e)return e+="",t.grep(y,function(t){return t._id==e})}return y},o.normalizeEvent=T;for(var i,c,u=o.trigger,f=o.getView,d=o.reportEvents,v={events:[]},h=[v],g=0,p=0,m=0,y=[],D=0;D<r.length;D++)C(r[D]);function b(e,r){!function e(r,o){var l;var u=a.sourceFetchers;var f;for(l=0;l<u.length;l++){if(!0===(f=u[l](r,i,c,o)))return;if("object"==typeof f)return void e(f,o)}var d=r.events;if(d)t.isFunction(d)?(E(),d(w(i),w(c),function(t){o(t),S()})):t.isArray(d)?o(d):o();else{var v=r.url;if(v){var h,g=r.success,p=r.error,m=r.complete;h=t.isFunction(r.data)?r.data():r.data;var y=t.extend({},h||{}),D=q(r.startParam,n.startParam),b=q(r.endParam,n.endParam);D&&(y[D]=Math.round(+i/1e3)),b&&(y[b]=Math.round(+c/1e3)),E(),t.ajax(t.extend({},s,r,{data:y,success:function(e){e=e||[];var n=I(g,this,arguments);t.isArray(n)&&(e=n),o(e)},error:function(){I(p,this,arguments),o()},complete:function(){I(m,this,arguments),S()}}))}else o()}}(e,function(a){if(r==g){if(a){n.eventDataTransform&&(a=t.map(a,n.eventDataTransform)),e.eventDataTransform&&(a=t.map(a,e.eventDataTransform));for(var o=0;o<a.length;o++)a[o].source=e,T(a[o]);y=y.concat(a)}--p||d(y)}})}function C(e){if(t.isFunction(e)||t.isArray(e)?e={events:e}:"string"==typeof e&&(e={url:e}),"object"==typeof e)return function(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=a.sourceNormalizers,n=0;n<e.length;n++)e[n](t)}(e),h.push(e),e}function E(){m++||u("loading",null,!0,f())}function S(){--m||u("loading",null,!1,f())}function T(t){var r=t.source||{},a=q(r.ignoreTimezone,n.ignoreTimezone);t._id=t._id||(t.id===e?"_fc"+l++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=w(t.start=M(t.start,a)),t.end=M(t.end,a),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?w(t.end):null,t.allDay===e&&(t.allDay=q(r.allDayDefault,n.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function x(t,e){return t&&e&&k(t)==k(e)}function k(t){return("object"==typeof t?t.events||t.url:"")||t}}.call(c,r,i);var u,f,d,p,m,y,D,b=c.isFetchNeeded,E=c.fetchEvents,S=n[0],k=0,H=0,F=new Date,R=[];function N(){setTimeout(function(){!p.start&&A()&&L()},0)}function z(){return n.is(":visible")}function A(){return t("body").is(":visible")}function O(e){p&&e==p.name||function(e){H++,p&&(tt("viewDestroy",p,p,p.element),$(),p.triggerEventDestroy(),Q(),p.element.remove(),u.deactivateButton(p.name));u.activateButton(e),p=new o[e](t("<div class='fc-view fc-view-"+e+"' style='position:relative'/>").appendTo(d),c),L(),K(),H--}(e)}function L(t){(!p.start||t||F<p.start||F>=p.end)&&z()&&P(t)}function P(t){var e;H++,p.start&&(tt("viewDestroy",p,p,p.element),$(),Z()),Q(),p.render(F,t||0),X(),K(),(p.afterRender||function(){})(),u.updateTitle(p.title),(e=new Date)>=p.start&&e<p.end?u.disableButton("today"):u.enableButton("today"),tt("viewRender",p,p,p.element),p.trigger("viewDisplay",S),H--,!r.lazyFetching||b(p.visStart,p.visEnd)?G():U()}function B(){z()&&($(),Z(),j(),X(),U())}function j(){y=r.contentHeight?r.contentHeight:r.height?r.height-(f?f.height():0)-W(d):Math.round(d.width()/Math.max(r.aspectRatio,.5))}function X(){y===e&&j(),H++,p.setHeight(y),p.setWidth(d.width()),H--,m=n.outerWidth()}function J(){if(!H)if(p.start){var t=++k;setTimeout(function(){t==k&&!H&&z()&&m!=(m=n.outerWidth())&&(H++,B(),p.trigger("windowResize",S),H--)},200)}else N()}function V(t){Z(),U(t)}function U(t){z()&&(p.setEventData(R),p.renderEvents(R,t),p.trigger("eventAfterAllRender"))}function Z(){p.triggerEventDestroy(),p.clearEvents(),p.clearEventData()}function G(){E(p.visStart,p.visEnd)}function $(){p&&p.unselect()}function Q(){d.css({width:"100%",height:d.height(),overflow:"hidden"})}function K(){d.css({width:"",height:"",overflow:""})}function tt(t,e){if(r[t])return r[t].apply(e||S,Array.prototype.slice.call(arguments,2))}C(F,r.year,r.month,r.date),r.droppable&&t(document).bind("dragstart",function(e,n){var a=e.target,o=t(a);if(!o.parents(".fc").length){var i=r.dropAccept;(t.isFunction(i)?i.call(a,o):o.is(i))&&(D=a,p.dragStart(D,e,n))}}).bind("dragstop",function(t,e){D&&(p.dragStop(D,t,e),D=null)})}(c,i,f);c.data("fullCalendar",u),u.render()}),this},a.sourceNormalizers=[],a.sourceFetchers=[];var s={dataType:"json",cache:!1},l=1;a.addDays=g,a.cloneDate=w,a.parseDate=M,a.parseISO8601=E,a.parseTime=S,a.formatDate=T,a.formatDates=x;var c=["sun","mon","tue","wed","thu","fri","sat"],u=864e5,f=36e5,d=6e4;function v(t,e,n){return t.setFullYear(t.getFullYear()+e),n||y(t),t}function h(t,e,n){if(+t){var r=t.getMonth()+e,a=w(t);for(a.setDate(1),a.setMonth(r),t.setMonth(r),n||y(t);t.getMonth()!=a.getMonth();)t.setDate(t.getDate()+(t<a?1:-1))}return t}function g(t,e,n){if(+t){var r=t.getDate()+e,a=w(t);a.setHours(9),a.setDate(r),t.setDate(r),n||y(t),p(t,a)}return t}function p(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(t<e?1:-1)*f)}function m(t,e){return t.setMinutes(t.getMinutes()+e),t}function y(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function w(t,e){return e?y(new Date(+t)):new Date(+t)}function D(){var t,e=0;do{t=new Date(1970,e++,1)}while(t.getHours());return t}function b(t,e){return Math.round((w(t,!0)-w(e,!0))/u)}function C(t,n,r,a){n!==e&&n!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(n)),r!==e&&r!=t.getMonth()&&(t.setDate(1),t.setMonth(r)),a!==e&&t.setDate(a)}function M(t,n){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(n===e&&(n=!0),E(t,n)||(t?new Date(t):null)):null}function E(t,e){var n=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var r=new Date(n[1],0,1);if(e||!n[13]){var a=new Date(n[1],0,1,9,0);n[3]&&(r.setMonth(n[3]-1),a.setMonth(n[3]-1)),n[5]&&(r.setDate(n[5]),a.setDate(n[5])),p(r,a),n[7]&&r.setHours(n[7]),n[8]&&r.setMinutes(n[8]),n[10]&&r.setSeconds(n[10]),n[12]&&r.setMilliseconds(1e3*Number("0."+n[12])),p(r,a)}else if(r.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),r.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var o=60*Number(n[16])+(n[18]?Number(n[18]):0);o*="-"==n[15]?1:-1,r=new Date(+r+60*o*1e3)}return r}function S(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var n=parseInt(e[1],10);return e[3]&&(n%=12,"p"==e[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(e[2]?parseInt(e[2],10):0)}}function T(t,e,n){return x(t,null,e,n)}function x(t,e,r,a){a=a||n;var o,i,s,l,c=t,u=e,f=r.length,d="";for(o=0;o<f;o++)if("'"==(i=r.charAt(o))){for(s=o+1;s<f;s++)if("'"==r.charAt(s)){c&&(d+=s==o+1?"'":r.substring(o+1,s),o=s);break}}else if("("==i){for(s=o+1;s<f;s++)if(")"==r.charAt(s)){var v=T(c,r.substring(o+1,s),a);parseInt(v.replace(/\D/,""),10)&&(d+=v),o=s;break}}else if("["==i){for(s=o+1;s<f;s++)if("]"==r.charAt(s)){var h=r.substring(o+1,s);(v=T(c,h,a))!=T(u,h,a)&&(d+=v),o=s;break}}else if("{"==i)c=e,u=t;else if("}"==i)c=t,u=e;else{for(s=f;s>o;s--)if(l=k[r.substring(o,s)]){c&&(d+=l(c,a)),o=s-1;break}s==o&&c&&(d+=i)}return d}var k={s:function(t){return t.getSeconds()},ss:function(t){return L(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return L(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return L(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return L(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return L(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return L(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return t.getHours()<12?"a":"p"},tt:function(t){return t.getHours()<12?"am":"pm"},T:function(t){return t.getHours()<12?"A":"P"},TT:function(t){return t.getHours()<12?"AM":"PM"},u:function(t){return T(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return e>10&&e<20?"th":["st","nd","rd"][e%10-1]||"th"},w:function(t,e){return e.weekNumberCalculation(t)},W:function(t){return(n=new Date(t.getTime())).setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1;var e,n}};function H(t){return t.end?(e=t.end,n=t.allDay,e=w(e),n||e.getHours()||e.getMinutes()?g(e,1):y(e)):g(w(t.start),1);var e,n}function F(n,r,a){n.unbind("mouseover").mouseover(function(n){for(var o,i,s,l=n.target;l!=this;)o=l,l=l.parentNode;(i=o._fci)!==e&&(o._fci=e,s=r[i],a(s.event,s.element,s),t(n.target).trigger(n)),n.stopPropagation()})}function R(e,n,r){for(var a,o=0;o<e.length;o++)(a=t(e[o])).width(Math.max(0,n-z(a,r)))}function N(e,n,r){for(var a,o=0;o<e.length;o++)(a=t(e[o])).height(Math.max(0,n-W(a,r)))}function z(e,n){return o=e,(parseFloat(t.css(o[0],"paddingLeft",!0))||0)+(parseFloat(t.css(o[0],"paddingRight",!0))||0)+(a=e,(parseFloat(t.css(a[0],"borderLeftWidth",!0))||0)+(parseFloat(t.css(a[0],"borderRightWidth",!0))||0))+(n?(r=e,(parseFloat(t.css(r[0],"marginLeft",!0))||0)+(parseFloat(t.css(r[0],"marginRight",!0))||0)):0);var r,a,o}function W(e,n){return o=e,(parseFloat(t.css(o[0],"paddingTop",!0))||0)+(parseFloat(t.css(o[0],"paddingBottom",!0))||0)+(a=e,(parseFloat(t.css(a[0],"borderTopWidth",!0))||0)+(parseFloat(t.css(a[0],"borderBottomWidth",!0))||0))+(n?(r=e,(parseFloat(t.css(r[0],"marginTop",!0))||0)+(parseFloat(t.css(r[0],"marginBottom",!0))||0)):0);var r,a,o}function A(t,e){return t-e}function O(t){return Math.max.apply(Math,t)}function L(t){return(t<10?"0":"")+t}function _(t,n){if(t[n]!==e)return t[n];for(var r,a=n.split(/(?=[A-Z])/),o=a.length-1;o>=0;o--)if((r=t[a[o].toLowerCase()])!==e)return r;return t[""]}function P(t){return t.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/'/g,"'").replace(/"/g,'"').replace(/\n/g,"<br />")}function Y(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function B(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function j(t,e){var n=t.source||{},r=t.color,a=n.color,o=e("eventColor"),i=t.backgroundColor||r||n.backgroundColor||a||e("eventBackgroundColor")||o,s=t.borderColor||r||n.borderColor||a||e("eventBorderColor")||o,l=t.textColor||n.textColor||e("eventTextColor"),c=[];return i&&c.push("background-color:"+i),s&&c.push("border-color:"+s),l&&c.push("color:"+l),c.join(";")}function I(e,n,r){if(t.isFunction(e)&&(e=[e]),e){var a,o;for(a=0;a<e.length;a++)o=e[a].apply(n,r)||o;return o}}function q(){for(var t=0;t<arguments.length;t++)if(arguments[t]!==e)return arguments[t]}function X(e,n,r){var a=this;a.renderBasic=function(n,r,g){C=n,M=r,S=g,F=L("theme")?"ui":"fc",N=L("columnFormat"),z=L("weekNumbers"),A=L("weekNumberTitle"),O="iso"!=L("weekNumberCalculation")?"w":"W",l||(p=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e));!function(){var n="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+function(){var t,e,n=F+"-widget-header",r="";for(r+="<thead><tr>",z&&(r+="<th class='fc-week-number "+n+"'>"+P(A)+"</th>"),t=0;t<M;t++)e=X(0,t),r+="<th class='fc-day-header fc-"+c[e.getDay()]+" "+n+"'>"+P(U(e,N))+"</th>";return r+="</tr></thead>"}()+function(){var t,e,n,r=F+"-widget-content",a="";for(a+="<tbody>",t=0;t<C;t++){for(a+="<tr class='fc-week'>",z&&(n=X(t,0),a+="<td class='fc-week-number "+r+"'><div>"+P(U(n,O))+"</div></td>"),e=0;e<M;e++)n=X(t,e),a+=Z(n);a+="</tr>"}return a+="</tbody>"}()+"</table>";o&&o.remove();o=t(n).appendTo(e),i=o.find("thead"),s=i.find(".fc-day-header"),l=o.find("tbody"),u=l.find("tr"),f=l.find(".fc-day"),d=u.find("td:first-child"),v=u.eq(0).find(".fc-day > div"),h=u.eq(0).find(".fc-day-content > div"),B(i.add(i.find("tr"))),B(u),u.eq(0).addClass("fc-first"),u.filter(":last").addClass("fc-last"),f.each(function(e,n){var r=X(Math.floor(e/M),e%M);_("dayRender",a,r,t(n))}),G(f)}()},a.setHeight=function(e){var n,r,a,o=e-i.height();"variable"==L("weekMode")?n=r=Math.floor(o/(1==C?2:6)):(n=Math.floor(o/C),r=o-n*(C-1));d.each(function(e,o){e<C&&(a=t(o)).find("> div").css("min-height",(e==C-1?r:n)-W(a))})},a.setWidth=function(t){m=t,k.clear(),H.clear(),b=0,z&&(b=i.find("th.fc-week-number").outerWidth());D=Math.floor((m-b)/M),R(s.slice(0,-1),D)},a.renderDayOverlay=Q,a.defaultSelectionEnd=function(t,e){return w(t)},a.renderSelection=function(t,e,n){Q(t,g(w(e),1),!0)},a.clearSelection=function(){I()},a.reportDayClick=function(t,e,n){var r=J(t),a=f[r.row*M+r.col];_("dayClick",a,t,e,n)},a.dragStart=function(t,e,n){x.start(function(t){I(),t&&et(t.row,t.col,t.row,t.col)},e)},a.dragStop=function(t,e,n){var r=x.stop();if(I(),r){var a=X(r);_("drop",t,a,!0,e,n)}},a.defaultEventEnd=function(t){return w(t.start)},a.getHoverListener=function(){return x},a.colLeft=function(t){return k.left(t)},a.colRight=function(t){return k.right(t)},a.colContentLeft=function(t){return H.left(t)},a.colContentRight=function(t){return H.right(t)},a.getIsCellAllDay=function(){return!0},a.allDayRow=function(t){return u.eq(t)},a.getRowCnt=function(){return C},a.getColCnt=function(){return M},a.getColWidth=function(){return D},a.getDaySegmentContainer=function(){return p},K.call(a,e,n,r),ot.call(a),at.call(a),function(){var t=this;t.renderEvents=function(e,n){t.renderDayEvents(e,n)},t.clearEvents=function(){t.getDaySegmentContainer().empty()},tt.call(t)}.call(a);var o,i,s,l,u,f,d,v,h,p,m,D,b,C,M,S,T,x,k,H,F,N,z,A,O,L=a.opt,_=a.trigger,j=a.renderOverlay,I=a.clearOverlays,q=a.daySelectionMousedown,X=a.cellToDate,J=a.dateToCell,V=a.rangeToSegments,U=n.formatDate;function Z(t){var e=F+"-widget-content",n=a.start.getMonth(),r=y(new Date),o="",i=["fc-day","fc-"+c[t.getDay()],e];return t.getMonth()!=n&&i.push("fc-other-month"),+t==+r?i.push("fc-today",F+"-state-highlight"):t<r?i.push("fc-past"):i.push("fc-future"),o+="<td class='"+i.join(" ")+"' data-date='"+U(t,"yyyy-MM-dd")+"'><div>",S&&(o+="<div class='fc-day-number'>"+t.getDate()+"</div>"),o+="<div class='fc-day-content'><div style='position:relative'> </div></div></div></td>"}function G(t){t.click($).mousedown(q)}function $(e){if(!L("selectable")){var n=E(t(this).data("date"));_("dayClick",this,n,!0,e)}}function Q(t,e,n){n&&T.build();for(var r=V(t,e),a=0;a<r.length;a++){var o=r[a];G(et(o.row,o.leftCol,o.row,o.rightCol))}}function et(t,n,r,a){var o=T.rect(t,n,r,a,e);return j(o,e)}Y(e.addClass("fc-grid")),T=new it(function(e,n){var r,a,o;s.each(function(e,i){r=t(i),a=r.offset().left,e&&(o[1]=a),o=[a],n[e]=o}),o[1]=a+r.outerWidth(),u.each(function(n,i){n<C&&(r=t(i),a=r.offset().top,n&&(o[1]=a),o=[a],e[n]=o)}),o[1]=a+r.outerHeight()}),x=new st(T),k=new lt(function(t){return v.eq(t)}),H=new lt(function(t){return h.eq(t)})}function J(n,r,a){var o=this;o.renderAgenda=function(e){nt=e,vt=bt("theme")?"ui":"fc",ht=bt("isRTL"),gt=S(bt("minTime")),pt=S(bt("maxTime")),mt=bt("columnFormat"),yt=bt("weekNumbers"),wt=bt("weekNumberTitle"),Dt="iso"!=bt("weekNumberCalculation")?"w":"W",G=bt("snapMinutes")||bt("slotMinutes"),i?Wt():function(){var e,r,a,o,i,s=vt+"-widget-header",l=vt+"-widget-content",c=bt("slotMinutes")%15==0;Wt(),M=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),bt("allDaySlot")?(E=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(M),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+s+" fc-agenda-axis'>"+bt("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+s+" fc-agenda-gutter'> </th></tr></table>",T=t(e).appendTo(M),At((x=T.find("tr")).find("td")),M.append("<div class='fc-agenda-divider "+s+"'><div class='fc-agenda-divider-inner'/></div>")):E=t([]);for(k=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(M),O=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(k),L=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(O),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",r=D(),o=m(w(r),pt),m(r,gt),rt=0,a=0;r<o;a++)i=r.getMinutes(),e+="<tr class='fc-slot"+a+" "+(i?"fc-minor":"")+"'><th class='fc-agenda-axis "+s+"'>"+(c&&i?" ":Nt(r,bt("axisFormat")))+"</th><td class='"+l+"'><div style='position:relative'> </div></td></tr>",m(r,bt("slotMinutes")),rt++;Ot((_=t(e+="</tbody></table>").appendTo(O)).find("td"))}()},o.setWidth=function(e){e,ft.clear(),dt.clear();var n=s.find("th:first");T&&(n=n.add(T.find("th:first")));n=n.add(_.find("th:first")),X=0,R(n.width("").each(function(e,n){X=Math.max(X,t(n).outerWidth())}),X);var r=i.find(".fc-agenda-gutter");T&&(r=r.add(T.find("th.fc-agenda-gutter")));var a=k[0].clientWidth;(U=k.width()-a)?(R(r,U),r.show().prev().removeClass("fc-last")):r.hide().prev().addClass("fc-last");J=Math.floor((a-X)/nt),R(l.slice(0,-1),J)},o.setHeight=function(t){t===e&&(t=q);q=t,zt={};var n=u.position().top,r=k.position().top,a=Math.min(t-n,_.height()+r+1);C.height(a-W(p)),M.css("top",n),k.height(a-r-1),Z=_.find("tr:first").height()+1,$=bt("slotMinutes")/G,et=Z/$},o.afterRender=function(){!function(){var t=D(),e=w(t);e.setHours(bt("firstHour"));var n=It(t,e)+1;function r(){k.scrollTop(n)}r(),setTimeout(r,0)}()},o.defaultEventEnd=function(t){var e=w(t.start);if(t.allDay)return e;return m(e,bt("defaultEventMinutes"))},o.timePosition=It,o.getIsCellAllDay=Bt,o.allDayRow=function(t){return x},o.getCoordinateGrid=function(){return ct},o.getHoverListener=function(){return ut},o.colLeft=function(t){return ft.left(t)},o.colRight=function(t){return ft.right(t)},o.colContentLeft=function(t){return dt.left(t)},o.colContentRight=function(t){return dt.right(t)},o.getDaySegmentContainer=function(){return E},o.getSlotSegmentContainer=function(){return L},o.getMinMinute=function(){return gt},o.getMaxMinute=function(){return pt},o.getSlotContainer=function(){return O},o.getRowCnt=function(){return 1},o.getColCnt=function(){return nt},o.getColWidth=function(){return J},o.getSnapHeight=function(){return et},o.getSnapMinutes=function(){return G},o.defaultSelectionEnd=function(t,e){if(e)return w(t);return m(w(t),bt("slotMinutes"))},o.renderDayOverlay=_t,o.renderSelection=function(t,e,n){n?bt("allDaySlot")&&_t(t,g(w(e),1),!0):qt(t,e)},o.clearSelection=Xt,o.reportDayClick=Vt,o.dragStart=function(t,e,n){ut.start(function(t){if(Et(),t)if(Bt(t))Pt(t.row,t.col,t.row,t.col);else{var e=jt(t),n=m(w(e),bt("defaultEventMinutes"));Yt(e,n)}},e)},o.dragStop=function(t,e,n){var r=ut.stop();Et(),r&&Ct("drop",t,jt(r),Bt(r),e,n)},K.call(o,n,r,a),ot.call(o),at.call(o),function(){var n=this;n.renderEvents=function(n,o){var i,s=n.length,l=[],u=[];for(i=0;i<s;i++)n[i].allDay?l.push(n[i]):u.push(n[i]);r("allDaySlot")&&(q(l,o),c());!function(n,o){var i,s,l,c,u,d,v,h,g,p,m,w,D,b,E,S,T=n.length,x="",k=f(),H=r("isRTL");for(i=0;i<T;i++)s=n[i],l=s.event,c=y(s.start,s.start),u=y(s.start,s.end),d=C(s.col),v=M(s.col),g=(h=(v-=.025*(h=v-d))-d)*(s.forwardCoord-s.backwardCoord),r("slotEventOverlap")&&(g=Math.max(2*(g-10),g)),H?(m=v-s.backwardCoord*h,p=m-g):(p=d+s.backwardCoord*h,m=p+g),p=Math.max(p,d),m=Math.min(m,v),g=m-p,s.top=c,s.left=p,s.outerWidth=g,s.outerHeight=u-c,x+=$(l,s);for(k[0].innerHTML=x,w=k.children(),i=0;i<T;i++)s=n[i],l=s.event,D=t(w[i]),!1===(b=a("eventRender",l,l,D))?D.remove():(b&&!0!==b&&(D.remove(),D=t(b).css({position:"absolute",top:s.top,left:s.left}).appendTo(k)),s.element=D,l._id===o?K(l,D,s):D[0]._fci=i,A(l,D));for(F(k,n,K),i=0;i<T;i++)s=n[i],(D=s.element)&&(s.vsides=W(D,!0),s.hsides=z(D,!0),(E=D.find(".fc-event-title")).length&&(s.contentTop=E[0].offsetTop));for(i=0;i<T;i++)s=n[i],(D=s.element)&&(D[0].style.width=Math.max(0,s.outerWidth-s.hsides)+"px",S=Math.max(0,s.outerHeight-s.vsides),D[0].style.height=S+"px",l=s.event,s.contentTop!==e&&S-s.contentTop<10&&(D.find("div.fc-event-time").text(J(l.start,r("timeFormat"))+" - "+l.title),D.find("div.fc-event-title").remove()),a("eventAfterRender",l,l,D))}(function(e){var n,r,a,o,i,s=S(),l=p(),c=h(),u=t.map(e,G),f=[];for(r=0;r<s;r++)for(m(n=E(0,r),l),i=V(i=Z(e,u,n,m(w(n),c-l))),a=0;a<i.length;a++)(o=i[a]).col=r,f.push(o);return f}(u),o)},n.clearEvents=function(){u().empty(),f().empty()},n.slotSegHtml=$,tt.call(n);var r=n.opt,a=n.trigger,o=n.isEventDraggable,i=n.isEventResizable,s=n.eventEnd,l=n.eventElementHandlers,c=n.setHeight,u=n.getDaySegmentContainer,f=n.getSlotSegmentContainer,v=n.getHoverListener,h=n.getMaxMinute,p=n.getMinMinute,y=n.timePosition,D=n.getIsCellAllDay,C=n.colContentLeft,M=n.colContentRight,E=n.cellToDate,S=n.getColCnt,T=n.getColWidth,x=n.getSnapHeight,k=n.getSnapMinutes,R=n.getSlotContainer,A=n.reportEventElement,O=n.showEvents,L=n.hideEvents,_=n.eventDrop,Y=n.eventResize,B=n.renderDayOverlay,I=n.clearOverlays,q=n.renderDayEvents,X=n.calendar,J=X.formatDate,U=X.formatDates;function Z(t,e,n,r){var a,o,i,s,l,c,u,f,d=[],v=t.length;for(a=0;a<v;a++)o=t[a],i=o.start,(s=e[a])>n&&i<r&&(i<n?(l=w(n),u=!1):(l=i,u=!0),s>r?(c=w(r),f=!1):(c=s,f=!0),d.push({event:o,start:l,end:c,isStart:u,isEnd:f}));return d.sort(Q)}function G(t){return t.end?w(t.end):m(w(t.start),r("defaultEventMinutes"))}function $(t,e){var n="<",a=t.url,s=j(t,r),l=["fc-event","fc-event-vert"];return o(t)&&l.push("fc-event-draggable"),e.isStart&&l.push("fc-event-start"),e.isEnd&&l.push("fc-event-end"),l=l.concat(t.className),t.source&&(l=l.concat(t.source.className||[])),n+=a?"a href='"+P(t.url)+"'":"div",n+=" class='"+l.join(" ")+"' style='position:absolute;top:"+e.top+"px;left:"+e.left+"px;"+s+"'><div class='fc-event-inner'><div class='fc-event-time'>"+P(U(t.start,t.end,r("timeFormat")))+"</div><div class='fc-event-title'>"+P(t.title||"")+"</div></div><div class='fc-event-bg'></div>",e.isEnd&&i(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(a?"a":"div")+">"}function K(t,e,c){var u,f,d,v,h,p,y,C=e.find("div.fc-event-time");o(t)&&function(t,e,o){var i,s,l,c,u,f,d,v,h,p,y,C=n.getCoordinateGrid(),M=S(),F=T(),R=x(),N=k();function z(){I(),l&&(u?(o.hide(),e.draggable("option","grid",null),B(g(w(t.start),h),g(H(t),h))):(!function(e){var n,a=m(w(t.start),e);t.end&&(n=m(w(t.end),e));o.text(U(a,n,r("timeFormat")))}(p),o.css("display",""),e.draggable("option","grid",[F,R])))}e.draggable({scroll:!1,grid:[F,R],axis:1==M&&"y",opacity:r("dragOpacity"),revertDuration:r("dragRevertDuration"),start:function(n,r){a("eventDragStart",e,t,n,r),L(t,e),C.build(),i=e.position(),s=C.cell(n.pageX,n.pageY),l=c=!0,u=f=D(s),d=v=0,h=0,p=y=0},drag:function(t,n){var r=C.cell(t.pageX,t.pageY);if(l=!!r){if(u=D(r),(d=Math.round((n.position.left-i.left)/F))!=v){var a=E(0,s.col),o=s.col+d;o=Math.max(0,o),o=Math.min(M-1,o);var g=E(0,o);h=b(g,a)}u||(p=Math.round((n.position.top-i.top)/R)*N)}l==c&&u==f&&d==v&&p==y||(z(),c=l,f=u,v=d,y=p),e.draggable("option","revert",!l)},stop:function(n,r){I(),a("eventDragStop",e,t,n,r),l&&(u||h||p)?_(this,t,h,u?0:p,u,n,r):(l=!0,u=!1,d=0,h=0,p=0,z(),e.css("filter",""),e.css(i),O(t,e))}})}(t,e,C),c.isEnd&&i(t)&&(u=t,f=e,d=C,p=x(),y=k(),f.resizable({handles:{s:".ui-resizable-handle"},grid:p,start:function(t,e){v=h=0,L(u,f),a("eventResizeStart",this,u,t,e)},resize:function(t,e){(v=Math.round((Math.max(p,f.height())-e.originalSize.height)/p))!=h&&(d.text(U(u.start,v||u.end?m(s(u),y*v):null,r("timeFormat"))),h=v)},stop:function(t,e){a("eventResizeStop",this,u,t,e),v?Y(this,u,0,y*v,t,e):O(u,f)}})),l(t,e)}n.draggableDayEvent=function(t,e,n){var o,i,s,l=n.isStart,c=!0,u=v(),f=T(),h=x(),m=k(),y=p();function D(){c||(e.width(o).height("").draggable("option","grid",null),c=!0)}e.draggable({opacity:r("dragOpacity","month"),revertDuration:r("dragRevertDuration"),start:function(n,v){a("eventDragStart",e,t,n,v),L(t,e),o=e.width(),u.start(function(n,a){if(I(),n){i=!1;var o=E(0,a.col),u=E(0,n.col);s=b(u,o),n.row?l?c&&(e.width(f-10),N(e,h*Math.round((t.end?(t.end-t.start)/d:r("defaultEventMinutes"))/m)),e.draggable("option","grid",[f,1]),c=!1):i=!0:(B(g(w(t.start),s),g(H(t),s)),D()),i=i||c&&!s}else D(),i=!0;e.draggable("option","revert",i)},n,"drag")},stop:function(n,r){if(u.stop(),I(),a("eventDragStop",e,t,n,r),i)D(),e.css("filter",""),O(t,e);else{var o=0;c||(o=Math.round((e.offset().top-R().offset().top)/h)*m+y-(60*t.start.getHours()+t.start.getMinutes())),_(this,t,s,o,c,n,r)}}})}}.call(o);var i,s,l,u,f,v,h,p,C,M,E,T,x,k,O,L,_,I,q,X,J,U,Z,G,$,et,nt,rt,ct,ut,ft,dt,vt,ht,gt,pt,mt,yt,wt,Dt,bt=o.opt,Ct=o.trigger,Mt=o.renderOverlay,Et=o.clearOverlays,St=o.reportSelection,Tt=o.unselect,xt=o.daySelectionMousedown,kt=o.slotSegHtml,Ht=o.cellToDate,Ft=o.dateToCell,Rt=o.rangeToSegments,Nt=r.formatDate,zt={};function Wt(){var e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+function(){var t,e,n,r=vt+"-widget-header",a="";for(a+="<thead><tr>",yt?(t=Ht(0,0),e=Nt(t,Dt),ht?e+=wt:e=wt+e,a+="<th class='fc-agenda-axis fc-week-number "+r+"'>"+P(e)+"</th>"):a+="<th class='fc-agenda-axis "+r+"'> </th>",n=0;n<nt;n++)t=Ht(0,n),a+="<th class='fc-"+c[t.getDay()]+" fc-col"+n+" "+r+"'>"+P(Nt(t,mt))+"</th>";return a+="<th class='fc-agenda-gutter "+r+"'> </th></tr></thead>"}()+function(){var t,e,n,r,a,o=vt+"-widget-header",i=vt+"-widget-content",s=y(new Date),l="";for(l+="<tbody><tr><th class='fc-agenda-axis "+o+"'> </th>",n="",e=0;e<nt;e++)t=Ht(0,e),a=["fc-col"+e,"fc-"+c[t.getDay()],i],+t==+s?a.push(vt+"-state-highlight","fc-today"):t<s?a.push("fc-past"):a.push("fc-future"),r="<td class='"+a.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'> </div></div></div></td>",n+=r;return l+=n,l+="<td class='fc-agenda-gutter "+i+"'> </td></tr></tbody>"}()+"</table>";i&&i.remove(),i=t(e).appendTo(n),s=i.find("thead"),l=s.find("th").slice(1,-1),u=i.find("tbody"),f=u.find("td").slice(0,-1),v=f.find("> div"),h=f.find(".fc-day-content > div"),p=f.eq(0),C=v.eq(0),B(s.add(s.find("tr"))),B(u.add(u.find("tr")))}function At(t){t.click(Lt).mousedown(xt)}function Ot(t){t.click(Lt).mousedown(Jt)}function Lt(t){if(!bt("selectable")){var e=Math.min(nt-1,Math.floor((t.pageX-i.offset().left-X)/J)),n=Ht(0,e),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var a=parseInt(r[1])*bt("slotMinutes"),o=Math.floor(a/60);n.setHours(o),n.setMinutes(a%60+gt),Ct("dayClick",f[e],n,!1,t)}else Ct("dayClick",f[e],n,!0,t)}}function _t(t,e,n){n&&ct.build();for(var r=Rt(t,e),a=0;a<r.length;a++){var o=r[a];At(Pt(o.row,o.leftCol,o.row,o.rightCol))}}function Pt(t,e,n,r){var a=ct.rect(t,e,n,r,M);return Mt(a,M)}function Yt(t,e){for(var n=0;n<nt;n++){var r=Ht(0,n),a=g(w(r),1),o=new Date(Math.max(r,t)),i=new Date(Math.min(a,e));if(o<i){var s=ct.rect(0,n,0,n,O),l=It(r,o),c=It(r,i);s.top=l,s.height=c-l,Ot(Mt(s,O))}}}function Bt(t){return bt("allDaySlot")&&!t.row}function jt(t){var e=Ht(0,t.col),n=t.row;return bt("allDaySlot")&&n--,n>=0&&m(e,gt+n*G),e}function It(t,n){if(n<m(w(t=w(t,!0)),gt))return 0;if(n>=m(w(t),pt))return _.height();var r=bt("slotMinutes"),a=60*n.getHours()+n.getMinutes()-gt,o=Math.floor(a/r),i=zt[o];return i===e&&(i=zt[o]=_.find("tr").eq(o).find("td div")[0].offsetTop),Math.max(0,Math.round(i-1+Z*(a%r/r)))}function qt(e,n){var r=bt("selectHelper");if(ct.build(),r){var a=Ft(e).col;if(a>=0&&a<nt){var o=ct.rect(0,a,0,a,O),i=It(e,e),s=It(e,n);if(s>i){if(o.top=i,o.height=s-i,o.left+=2,o.width-=5,t.isFunction(r)){var l=r(e,n);l&&(o.position="absolute",I=t(l).css(o).appendTo(O))}else o.isStart=!0,o.isEnd=!0,(I=t(kt({title:"",start:e,end:n,className:["fc-select-helper"],editable:!1},o))).css("opacity",bt("dragOpacity"));I&&(Ot(I),O.append(I),R(I,o.width,!0),N(I,o.height,!0))}}}else Yt(e,n)}function Xt(){Et(),I&&(I.remove(),I=null)}function Jt(e){var n;1==e.which&&bt("selectable")&&(Tt(e),ut.start(function(t,e){if(Xt(),t&&t.col==e.col&&!Bt(t)){var r=jt(e),a=jt(t);qt((n=[r,m(w(r),G),a,m(w(a),G)].sort(A))[0],n[3])}else n=null},e),t(document).one("mouseup",function(t){ut.stop(),n&&(+n[0]==+n[1]&&Vt(n[0],!1,t),St(n[0],n[3],!1,t))}))}function Vt(t,e,n){Ct("dayClick",f[Ft(t).col],t,e,n)}Y(n.addClass("fc-agenda")),ct=new it(function(e,n){var r,a,o;l.each(function(e,i){r=t(i),a=r.offset().left,e&&(o[1]=a),o=[a],n[e]=o}),o[1]=a+r.outerWidth(),bt("allDaySlot")&&(a=(r=x).offset().top,e[0]=[a,a+r.outerHeight()]);var i=O.offset().top,s=k.offset().top,c=s+k.outerHeight();function u(t){return Math.max(s,Math.min(c,t))}for(var f=0;f<rt*$;f++)e.push([u(i+et*f),u(i+et*(f+1))])}),ut=new st(ct),ft=new lt(function(t){return v.eq(t)}),dt=new lt(function(t){return h.eq(t)})}function V(t){var e,n=function(t){var e,n,r,a=[];for(e=0;e<t.length;e++){for(n=t[e],r=0;r<a.length&&G(n,a[r]).length;r++);(a[r]||(a[r]=[])).push(n)}return a}(t),r=n[0];if(function(t){var e,n,r,a,o;for(e=0;e<t.length;e++)for(n=t[e],r=0;r<n.length;r++)for((a=n[r]).forwardSegs=[],o=e+1;o<t.length;o++)G(a,t[o],a.forwardSegs)}(n),r){for(e=0;e<r.length;e++)U(r[e]);for(e=0;e<r.length;e++)Z(r[e],0,0)}return function(t){var e,n,r,a=[];for(e=0;e<t.length;e++)for(n=t[e],r=0;r<n.length;r++)a.push(n[r]);return a}(n)}function U(t){var n,r,a=t.forwardSegs,o=0;if(t.forwardPressure===e){for(n=0;n<a.length;n++)U(r=a[n]),o=Math.max(o,1+r.forwardPressure);t.forwardPressure=o}}function Z(t,n,r){var a,o=t.forwardSegs;if(t.forwardCoord===e)for(o.length?(o.sort($),Z(o[0],n+1,r),t.forwardCoord=o[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-r)/(n+1),a=0;a<o.length;a++)Z(o[a],0,t.forwardCoord)}function G(t,e,n){n=n||[];for(var r=0;r<e.length;r++)a=t,o=e[r],a.end>o.start&&a.start<o.end&&n.push(e[r]);var a,o;return n}function $(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||Q(t,e)}function Q(t,e){return t.start-e.start||e.end-e.start-(t.end-t.start)||(t.event.title||"").localeCompare(e.event.title)}function K(n,r,a){var o=this;o.element=n,o.calendar=r,o.name=a,o.opt=v,o.trigger=h,o.isEventDraggable=function(t){var e=t.source||{};return q(t.startEditable,e.startEditable,v("eventStartEditable"),t.editable,e.editable,v("editable"))&&!v("disableDragging")},o.isEventResizable=function(t){var e=t.source||{};return q(t.durationEditable,e.durationEditable,v("eventDurationEditable"),t.editable,e.editable,v("editable"))&&!v("disableResizing")},o.setEventData=function(t){c={};var e,n,r=t.length;for(e=0;e<r;e++)n=t[e],c[n._id]?c[n._id].push(n):c[n._id]=[n]},o.clearEventData=function(){c={},u={},f=[]},o.eventEnd=p,o.reportEventElement=function(t,e){f.push({event:t,element:e}),u[t._id]?u[t._id].push(e):u[t._id]=[e]},o.triggerEventDestroy=function(){t.each(f,function(t,e){o.trigger("eventDestroy",e.event,e.event,e.element)})},o.eventElementHandlers=function(t,e){e.click(function(n){if(!e.hasClass("ui-draggable-dragging")&&!e.hasClass("ui-resizable-resizing"))return h("eventClick",this,t,n)}).hover(function(e){h("eventMouseover",this,t,e)},function(e){h("eventMouseout",this,t,e)})},o.showEvents=function(t,e){y(t,e,"show")},o.hideEvents=function(t,e){y(t,e,"hide")},o.eventDrop=function(t,e,n,r,a,o,i){var s=e.allDay,u=e._id;D(c[u],n,r,a),h("eventDrop",t,e,n,r,a,function(){D(c[u],-n,-r,s),l(u)},o,i),l(u)},o.eventResize=function(t,e,n,r,a,o){var i=e._id;C(c[i],n,r),h("eventResize",t,e,n,r,function(){C(c[i],-n,-r),l(i)},a,o),l(i)};var i=o.defaultEventEnd,s=r.normalizeEvent,l=r.reportEventChange,c={},u={},f=[],d=r.options;function v(e,n){var r=d[e];return t.isPlainObject(r)?_(r,n||a):r}function h(t,e){return r.trigger.apply(r,[t,e||o].concat(Array.prototype.slice.call(arguments,2),[o]))}function p(t){return t.end?w(t.end):i(t)}function y(t,e,n){var r,a=u[t._id],o=a.length;for(r=0;r<o;r++)e&&a[r][0]==e[0]||a[r][n]()}function D(t,n,r,a){r=r||0;for(var o,i=t.length,l=0;l<i;l++)o=t[l],a!==e&&(o.allDay=a),m(g(o.start,n,!0),r),o.end&&(o.end=m(g(o.end,n,!0),r)),s(o,d)}function C(t,e,n){n=n||0;for(var r,a=t.length,o=0;o<a;o++)(r=t[o]).end=m(g(p(r),e,!0),n),s(r,d)}o.isHiddenDay=function(t){"object"==typeof t&&(t=t.getDay());return S[t]},o.skipHiddenDays=function(t,e,n){e=e||1;for(;S[(t.getDay()+(n?e:0)+7)%7];)g(t,e)},o.getCellsPerWeek=function(){return M},o.dateToCell=function(t){return W(z(N(t)))},o.dateToDayOffset=N,o.dayOffsetToCellOffset=z,o.cellOffsetToCell=W,o.cellToDate=function(){return R(F(H.apply(null,arguments)))},o.cellToCellOffset=H,o.cellOffsetToDayOffset=F,o.dayOffsetToDate=R,o.rangeToSegments=function(t,e){for(var n=o.getRowCnt(),r=o.getColCnt(),a=[],i=N(t),s=N(e),l=z(i),c=z(s)-1,u=0;u<n;u++){var f=u*r,d=f+r-1,v=Math.max(l,f),h=Math.min(c,d);if(v<=h){var g=W(v),p=W(h),m=[g.col,p.col].sort(),y=F(v)==i,w=F(h)+1==s;a.push({row:u,leftCol:m[0],rightCol:m[1],isStart:y,isEnd:w})}}return a};var M,E=v("hiddenDays")||[],S=[],T=[],x=[],k=v("isRTL");function H(t,e){var n=o.getColCnt(),r=k?-1:1,a=k?n-1:0;return"object"==typeof t&&(e=t.col,t=t.row),t*n+(e*r+a)}function F(t){var e=o.visStart.getDay();return t+=T[e],7*Math.floor(t/M)+x[(t%M+M)%M]-e}function R(t){var e=w(o.visStart);return g(e,t),e}function N(t){return b(t,o.visStart)}function z(t){var e=o.visStart.getDay();return t+=e,Math.floor(t/7)*M+T[(t%7+7)%7]-T[e]}function W(t){var e=o.getColCnt(),n=k?-1:1,r=k?e-1:0;return{row:Math.floor(t/e),col:(t%e+e)%e*n+r}}!function(){!1===v("weekends")&&E.push(0,6);for(var e=0,n=0;e<7;e++)T[e]=n,S[e]=-1!=t.inArray(e,E),S[e]||(x[n]=e,n++);if(!(M=n))throw"invalid hiddenDays"}()}function tt(){var e=this;e.renderDayEvents=function(t,e){var n=B(t,!1,!0);nt(n,function(t,e){s(t.event,e)}),a=n,o=e,i=M(),nt(a,function(t,e,n){var r=t.event;r._id===o?J(r,e,t):e[0]._fci=n}),F(i,a,J),nt(n,function(t,e){r("eventAfterRender",t.event,t.event,e)});var a,o,i},e.draggableDayEvent=function(t,e){var a,o=k();e.draggable({delay:50,opacity:n("dragOpacity"),revertDuration:n("dragRevertDuration"),start:function(n,i){r("eventDragStart",e,t,n,i),u(t,e),o.start(function(n,r,o,i){if(e.draggable("option","revert",!n||!o&&!i),T(),n){var s=N(r),l=N(n);a=b(l,s),S(g(w(t.start),a),g(H(t),a))}else a=0},n,"drag")},stop:function(n,i){o.stop(),T(),r("eventDragStop",e,t,n,i),a?f(this,t,a,0,t.allDay,n,i):(e.css("filter",""),c(t,e))}})},e.resizableDayEvent=function(e,a,o){var s=n("isRTL")?"w":"e",l=a.find(".ui-resizable-"+s),f=!1;Y(a),a.mousedown(function(t){t.preventDefault()}).click(function(t){f&&(t.preventDefault(),t.stopImmediatePropagation())}),l.mousedown(function(n){if(1==n.which){f=!0;var l,p,m=k(),y=(v(),h(),a.css("top")),w=t.extend({},e),D=_(L(e.start));x(),t("body").css("cursor",s+"-resize").one("mouseup",function(n){r("eventResizeStop",this,e,n),t("body").css("cursor",""),m.stop(),T(),l&&d(this,e,l,0,n);setTimeout(function(){f=!1},0)}),r("eventResizeStart",this,e,n),m.start(function(n,r){if(n){var a=W(r),f=W(n);if(f=Math.max(f,D),l=A(f)-A(a)){w.end=g(i(e),l,!0);var d=p;v=w,h=o.row,m=y,b=[],nt(B([v],!0,!1),function(t,e){t.row===h&&e.css("top",m),b.push(e[0])}),(p=t(p=b)).find("*").css("cursor",s+"-resize"),d&&d.remove(),u(e)}else p&&(c(e),p.remove(),p=null);T(),S(e.start,g(H(e),l))}var v,h,m,b},n)}})};var n=e.opt,r=e.trigger,a=e.isEventDraggable,o=e.isEventResizable,i=e.eventEnd,s=e.reportEventElement,l=e.eventElementHandlers,c=e.showEvents,u=e.hideEvents,f=e.eventDrop,d=e.eventResize,v=e.getRowCnt,h=e.getColCnt,p=(e.getColWidth,e.allDayRow),m=e.colLeft,y=e.colRight,D=e.colContentLeft,C=e.colContentRight,M=(e.dateToCell,e.getDaySegmentContainer),E=e.calendar.formatDates,S=e.renderDayOverlay,T=e.clearOverlays,x=e.clearSelection,k=e.getHoverListener,R=e.rangeToSegments,N=e.cellToDate,W=e.cellToCellOffset,A=e.cellOffsetToDayOffset,L=e.dateToDayOffset,_=e.dayOffsetToCellOffset;function B(e,a,o){var i,s,l=M(),c=a?t("<div/>"):l,u=function(t){for(var e=[],n=0;n<t.length;n++){var r=I(t[n]);e.push.apply(e,r)}return e}(e);return function(t){for(var e=n("isRTL"),r=0;r<t.length;r++){var a=t[r],o=(e?a.isEnd:a.isStart)?D:m,i=(e?a.isStart:a.isEnd)?C:y,s=o(a.leftCol),l=i(a.rightCol);a.left=s,a.outerWidth=l-s}}(u),i=function(t){for(var e="",n=0;n<t.length;n++)e+=q(t[n]);return e}(u),c[0].innerHTML=i,s=c.children(),a&&l.append(s),function(e,n){for(var a=0;a<e.length;a++){var o=e[a],i=o.event,s=n.eq(a),l=r("eventRender",i,i,s);!1===l?s.remove():(l&&!0!==l&&(l=t(l).css({position:"absolute",left:o.left}),s.replaceWith(l),s=l),o.element=s)}}(u,s),nt(u,function(t,e){t.hsides=z(e,!0)}),nt(u,function(t,e){e.width(Math.max(0,t.outerWidth-t.hsides))}),nt(u,function(t,e){t.outerHeight=e.outerHeight(!0)}),function(t,e){var n=function(t){for(var e=v(),n=h(),r=[],a=function(t){var e,n,r,a=v(),o=[];for(e=0;e<t.length;e++)n=t[e],r=n.row,n.element&&(o[r]?o[r].push(n):o[r]=[n]);for(r=0;r<a;r++)o[r]=X(o[r]||[]);return o}(t),o=0;o<e;o++){for(var i=a[o],s=[],l=0;l<n;l++)s.push(0);for(var c=0;c<i.length;c++){var u=i[c];u.top=O(s.slice(u.leftCol,u.rightCol+1));for(var l=u.leftCol;l<=u.rightCol;l++)s[l]=u.top+u.outerHeight}r.push(O(s))}return r}(t),r=function(){var t,e=v(),n=[];for(t=0;t<e;t++)n[t]=p(t).find("div.fc-day-content > div");return n}(),a=[];if(e)for(var o=0;o<r.length;o++)r[o].height(n[o]);for(var o=0;o<r.length;o++)a.push(r[o].position().top);nt(t,function(t,e){e.css("top",a[t.row]+t.top)})}(u,o),u}function I(t){for(var e=t.start,n=H(t),r=R(e,n),a=0;a<r.length;a++)r[a].event=t;return r}function q(t){var e="",r=n("isRTL"),i=t.event,s=i.url,l=["fc-event","fc-event-hori"];a(i)&&l.push("fc-event-draggable"),t.isStart&&l.push("fc-event-start"),t.isEnd&&l.push("fc-event-end"),l=l.concat(i.className),i.source&&(l=l.concat(i.source.className||[]));var c=j(i,n);return e+=s?"<a href='"+P(s)+"'":"<div",e+=" class='"+l.join(" ")+"' style='position:absolute;left:"+t.left+"px;"+c+"'><div class='fc-event-inner'>",!i.allDay&&t.isStart&&(e+="<span class='fc-event-time'>"+P(E(i.start,i.end,n("timeFormat")))+"</span>"),e+="<span class='fc-event-title'>"+P(i.title||"")+"</span></div>",t.isEnd&&o(i)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(r?"w":"e")+"'>   </div>"),e+="</"+(s?"a":"div")+">"}function X(t){for(var e=[],n=function(t){t.sort(rt);for(var e=[],n=0;n<t.length;n++){for(var r=t[n],a=0;a<e.length&&et(r,e[a]);a++);e[a]?e[a].push(r):e[a]=[r]}return e}(t),r=0;r<n.length;r++)e.push.apply(e,n[r]);return e}function J(t,n,r){a(t)&&e.draggableDayEvent(t,n,r),r.isEnd&&o(t)&&e.resizableDayEvent(t,n,r),l(t,n)}}function et(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(r.leftCol<=t.rightCol&&r.rightCol>=t.leftCol)return!0}return!1}function nt(t,e){for(var n=0;n<t.length;n++){var r=t[n],a=r.element;a&&e(r,a,n)}}function rt(t,e){return e.rightCol-e.leftCol-(t.rightCol-t.leftCol)||e.event.allDay-t.event.allDay||t.event.start-e.event.start||(t.event.title||"").localeCompare(e.event.title)}function at(){var e=this;e.select=function(t,e,n){l(),e||(e=a(t,n));o(t,e,n),c(t,e,n)},e.unselect=l,e.reportSelection=c,e.daySelectionMousedown=function(r){var a=e.cellToDate,s=e.getIsCellAllDay,u=e.getHoverListener(),f=e.reportDayClick;if(1==r.which&&n("selectable")){l(r);var d;u.start(function(t,e){i(),t&&s(t)?(d=[a(e),a(t)].sort(A),o(d[0],d[1],!0)):d=null},r),t(document).one("mouseup",function(t){u.stop(),d&&(+d[0]==+d[1]&&f(d[0],!0,t),c(d[0],d[1],!0,t))})}};var n=e.opt,r=e.trigger,a=e.defaultSelectionEnd,o=e.renderSelection,i=e.clearSelection,s=!1;function l(t){s&&(s=!1,i(),r("unselect",null,t))}function c(t,e,n,a){s=!0,r("select",null,t,e,n,a)}n("selectable")&&n("unselectAuto")&&t(document).mousedown(function(e){var r=n("unselectCancel");r&&t(e.target).parents(r).length||l(e)})}function ot(){this.renderOverlay=function(r,a){var o=n.shift();o||(o=t("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));o[0].parentNode!=a[0]&&o.appendTo(a);return e.push(o.css(r).show()),o},this.clearOverlays=function(){var t;for(;t=e.shift();)n.push(t.hide().unbind())};var e=[],n=[]}function it(t){var e,n;this.build=function(){t(e=[],n=[])},this.cell=function(t,r){var a,o=e.length,i=n.length,s=-1,l=-1;for(a=0;a<o;a++)if(r>=e[a][0]&&r<e[a][1]){s=a;break}for(a=0;a<i;a++)if(t>=n[a][0]&&t<n[a][1]){l=a;break}return s>=0&&l>=0?{row:s,col:l}:null},this.rect=function(t,r,a,o,i){var s=i.offset();return{top:e[t][0]-s.top,left:n[r][0]-s.left,width:n[o][1]-n[r][0],height:e[a][1]-e[t][0]}}}function st(n){var r,a,o,i;function s(t){var r;(r=t).pageX===e&&(r.pageX=r.originalEvent.pageX,r.pageY=r.originalEvent.pageY);var s=n.cell(t.pageX,t.pageY);(!s!=!i||s&&(s.row!=i.row||s.col!=i.col))&&(s?(o||(o=s),a(s,o,s.row-o.row,s.col-o.col)):a(s,o),i=s)}this.start=function(e,l,c){a=e,o=i=null,n.build(),s(l),r=c||"mousemove",t(document).bind(r,s)},this.stop=function(){return t(document).unbind(r,s),i}}function lt(t){var n=this,r={},a={},o={};function i(e){return r[e]=r[e]||t(e)}n.left=function(t){return a[t]=a[t]===e?i(t).position().left:a[t]},n.right=function(t){return o[t]=o[t]===e?n.left(t)+i(t).width():o[t]},n.clear=function(){r={},a={},o={}}}a.dateFormatters=k,a.applyAll=I,o.month=function(t,e){var n=this;n.render=function(t,e){e&&(h(t,e),t.setDate(1));var l=r("firstDay"),c=w(t,!0);c.setDate(1);var u=h(w(c),1),f=w(c);g(f,-(f.getDay()-l+7)%7),o(f);var d=w(u);g(d,(7-d.getDay()+l)%7),o(d,-1,!0);var v=i(),p=Math.round(b(d,f)/7);"fixed"==r("weekMode")&&(g(d,7*(6-p)),p=6);n.title=s(c,r("titleFormat")),n.start=c,n.end=u,n.visStart=f,n.visEnd=d,a(p,v,!0)},X.call(n,t,e,"month");var r=n.opt,a=n.renderBasic,o=n.skipHiddenDays,i=n.getCellsPerWeek,s=e.formatDate},o.basicWeek=function(t,e){var n=this;n.render=function(t,e){e&&g(t,7*e);var l=g(w(t),-(t.getDay()-r("firstDay")+7)%7),c=g(w(l),7),u=w(l);o(u);var f=w(c);o(f,-1,!0);var d=i();n.start=l,n.end=c,n.visStart=u,n.visEnd=f,n.title=s(u,g(w(f),-1),r("titleFormat")),a(1,d,!1)},X.call(n,t,e,"basicWeek");var r=n.opt,a=n.renderBasic,o=n.skipHiddenDays,i=n.getCellsPerWeek,s=e.formatDates},o.basicDay=function(t,e){var n=this;n.render=function(t,e){e&&g(t,e);o(t,e<0?-1:1);var s=w(t,!0),l=g(w(s),1);n.title=i(t,r("titleFormat")),n.start=n.visStart=s,n.end=n.visEnd=l,a(1,1,!1)},X.call(n,t,e,"basicDay");var r=n.opt,a=n.renderBasic,o=n.skipHiddenDays,i=e.formatDate},i({weekMode:"fixed"}),o.agendaWeek=function(t,e){var n=this;n.render=function(t,e){e&&g(t,7*e);var l=g(w(t),-(t.getDay()-r("firstDay")+7)%7),c=g(w(l),7),u=w(l);o(u);var f=w(c);o(f,-1,!0);var d=i();n.title=s(u,g(w(f),-1),r("titleFormat")),n.start=l,n.end=c,n.visStart=u,n.visEnd=f,a(d)},J.call(n,t,e,"agendaWeek");var r=n.opt,a=n.renderAgenda,o=n.skipHiddenDays,i=n.getCellsPerWeek,s=e.formatDates},o.agendaDay=function(t,e){var n=this;n.render=function(t,e){e&&g(t,e);o(t,e<0?-1:1);var s=w(t,!0),l=g(w(s),1);n.title=i(t,r("titleFormat")),n.start=n.visStart=s,n.end=n.visEnd=l,a(1)},J.call(n,t,e,"agendaDay");var r=n.opt,a=n.renderAgenda,o=n.skipHiddenDays,i=e.formatDate},i({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery);